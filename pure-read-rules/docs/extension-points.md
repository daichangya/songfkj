# 规则与扩展的扩展点与未来考虑

本文档列出当前 **未覆盖** 但可在主项目或未来版本中考虑的能力，便于主项目实现与社区扩展时对齐约定。

## 当前未覆盖的扩展点

- **更细的 URL 路径约定**：**已实现**。主项目与规则格式支持可选 **pathPattern**（路径前缀），同一 host 可配置多条规则（如列表页/详情页），详见 [rule-schema](rule-schema.md) 与 [host-convention](host-convention.md)。
- **从当前页生成规则草稿**：规则格式本身无需变更；主项目可提供「从当前页生成规则草稿」功能：采集 host、标题/正文/作者候选选择器，生成符合 [rule-schema](rule-schema.md) 的 JSON，供用户保存为 user 规则或导出提交到本仓库。
- **高级选择器（XPath / 轻量脚本）**：当前仅支持 CSS 选择器。若未来支持 XPath 或只读的轻量脚本（如在受控沙箱中执行），需在主项目中定义新字段与安全策略，本仓库可增加可选字段说明；**不**引入任意脚本执行，以符合扩展安全与审核要求。

## 为何暂不纳入

- **仅 CSS**：避免在页面上下文执行用户/社区脚本，降低安全与兼容风险，规则可静态校验。
- **host + 可选 pathPattern**：实现简单、依赖少；路径级需求已由 pathPattern 满足，无需 minimatch 等完整 URL 模式。
- **不随规则仓库发脚本**：规则仓库只存放数据（JSON），执行逻辑始终在主项目，便于审计与版本管理。

## 若未来扩展

- 新增字段应为**可选**，旧客户端忽略未知字段即可。
- 涉及新匹配或执行逻辑时，主项目需同步更新 RuleSystem（主项目内 `src/core/RuleSystem.ts`）与拉取/解析逻辑，并在本仓库 docs 中补充说明。
